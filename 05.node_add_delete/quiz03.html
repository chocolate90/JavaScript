<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <h1>할 일 목록 만들기</h1>

  <div class="nameForm">
    <h2 class="nameTitle"></h2>
    <input type="text" placeholder="당신의 이름을 적으세요." id="names">
    <button type="button" id="check">확인</button><br>
  </div>

  <div>
    <input type="text" placeholder="당신의 할 일을 적으세요." id="todo">
    <button type="button" id="add">확인</button>
  </div>

  <ul id="list">

  </ul>

  

  <script>

    var nameForm = document.querySelector(".nameForm");
    var nameTitle = document.querySelector(".nameTitle");
    var names = document.getElementById("names");
    var check = document.getElementById("check");

    check.addEventListener("click", function() {

      nameTitle.innerHTML = names.value + "님 안녕하세요?";


      names.style.display = "none";
      check.style.display = "none";

    });



    var add = document.getElementById("add");


    add.onclick = function () {

      var list = document.getElementById("list");

      var li = document.createElement("li");
      var todo = document.getElementById("todo");

      var button = document.createElement("button");
      var button1 = document.createElement("button");
      var button2 = document.createElement("button");

      li.innerHTML = todo.value;
      button.innerHTML = "x";
      button1.innerHTML = "↑";
      button2.innerHTML = "↓";

      button.addEventListener("click", deleteTodo);
      button1.addEventListener("click", up);
      button2.addEventListener("click", down);

      li.appendChild(button);
      li.appendChild(button1);
      li.appendChild(button2);
      list.appendChild(li);

    }

    /* 삭제 기능 */
    function deleteTodo() {

      /* 
        x 버튼 클릭시 해당 버튼 요소를 판별할 수 없음
        x 버튼 클릭스 부모요소인 li를 삭제 해야한다.
      */

      event.target.parentElement.remove();
      
    }

    function up() {

      var list = document.getElementById("list");
      var current = event.target.parentElement;
      var previous = current.previousElementSibling;

      console.log(current);
      console.log(previous);

      if(previous === null) {
        alert("첫번째 행입니다.");
        return;
      }

      if(confirm("이동하시겠습니까?")) {

        list.insertBefore(current, previous);

      }

      
    }

    function down() {

      var list = document.getElementById("list");
      var current = event.target.parentElement;
      var next = current.nextElementSibling;

      console.log(current);
      console.log(next);

      if(next === null) {
        alert("마지막 행입니다.");
        return;
      }

      if(confirm("이동하시겠습니까?")) {
        list.insertBefore(next, current);
      }

    }

  </script>

</body>

</html>