<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

  <button type="button" onclick="ajax();">ajax호출</button>

  <script>

    function ajax() {

      // fetch("hi.txt").then(function(response) {

      //   response.text().then(function(a) {

      //     console.log(a);

      //   });

      // });


      /* 
        호출을 하면 호출구문이 오랜시간 걸릴 수 있기 때문에, 프로미스라는 내장객체를 반환해준다.

        promise는 fetch를 사용했을 때, 상태결과를 반환해주는 약속된 객체
        1. pending (수행중)
        2. fullfilled (성공)
        3. reject (거절)
      */
      // var promise =  fetch("hi.txt");

      // console.log(promise);

      /* 
        then함수 - 콜백함수를 담아서 결과를 반환받는 함수 
        콜백함수 - 첫번째 매개변수는 response를 받는다.
        response - 성공/실패/url주소/데이터에 대한 많은 정보와 내용이 담겨져 있다.
      */

      // fetch("aaaaaa.txt").then(function(response) {

      //   if(response.status != 200) {
      //     return;
      //   }

      // });

      /* 
        response안에 text() 함수는 응답데이터를 문자열의 형식으로 바꾸는 함수
        이 결과는 다시 promise고 then 함수를 이용해서 결과를 받을 수 있다.
      */
      // fetch("hi.txt").then(function(response) {

      //   response.text().then(function(text) {

      //     console.log(text);

      //   });

      // });


      /* 비동기 함수는 순서대로 실행되지 않는다. */
      fetch("hi.txt").then(func1);

      function func1(response) {
        console.log(1);
      }

      console.log(2);

    }

  </script>

</body>
</html>